(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9ad3ac0c"],{"09d8":function(e,t,s){},"21a6":function(e,t,s){(function(s){var o,i,a;(function(s,n){i=[],o=n,a="function"===typeof o?o.apply(t,i):o,void 0===a||(e.exports=a)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function o(e,t,s){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){l(o.response,t,s)},o.onerror=function(){console.error("could not download file")},o.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function a(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof s&&s.global===s?s:void 0,l=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,s){var l=n.URL||n.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"==typeof e?(r.href=e,r.origin===location.origin?a(r):i(r.href)?o(e,t,s):a(r,r.target="_blank")):(r.href=l.createObjectURL(e),setTimeout((function(){l.revokeObjectURL(r.href)}),4e4),setTimeout((function(){a(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,s,n){if(s=s||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,n),s);else if(i(e))o(e,s,n);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout((function(){a(l)}))}}:function(e,t,s,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return o(e,t,s);var a="application/octet-stream"===e.type,l=/constructor/i.test(n.HTMLElement)||n.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||a&&l)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var e=u.result;e=r?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},u.readAsDataURL(e)}else{var d=n.URL||n.webkitURL,c=d.createObjectURL(e);i?i.location=c:location.href=c,i=null,setTimeout((function(){d.revokeObjectURL(c)}),4e4)}});n.saveAs=l.saveAs=l,e.exports=l}))}).call(this,s("c8ba"))},2743:function(e,t,s){"use strict";var o=s("09d8"),i=s.n(o);i.a},"2f21":function(e,t,s){"use strict";var o=s("79e5");e.exports=function(e,t){return!!e&&o((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},"3b2b":function(e,t,s){var o=s("7726"),i=s("5dbc"),a=s("86cc").f,n=s("9093").f,l=s("aae3"),r=s("0bfb"),u=o.RegExp,d=u,c=u.prototype,m=/a/g,h=/a/g,f=new u(m)!==m;if(s("9e1e")&&(!f||s("79e5")((function(){return h[s("2b4c")("match")]=!1,u(m)!=m||u(h)==h||"/a/i"!=u(m,"i")})))){u=function(e,t){var s=this instanceof u,o=l(e),a=void 0===t;return!s&&o&&e.constructor===u&&a?e:i(f?new d(o&&!a?e.source:e,t):d((o=e instanceof u)?e.source:e,o&&a?r.call(e):t),s?this:c,u)};for(var b=function(e){e in u||a(u,e,{configurable:!0,get:function(){return d[e]},set:function(t){d[e]=t}})},p=n(d),g=0;p.length>g;)b(p[g++]);c.constructor=u,u.prototype=c,s("2aba")(o,"RegExp",u)}s("7a56")("RegExp")},"55dd":function(e,t,s){"use strict";var o=s("5ca1"),i=s("d8e8"),a=s("4bf8"),n=s("79e5"),l=[].sort,r=[1,2,3];o(o.P+o.F*(n((function(){r.sort(void 0)}))||!n((function(){r.sort(null)}))||!s("2f21")(l)),"Array",{sort:function(e){return void 0===e?l.call(a(this)):l.call(a(this),i(e))}})},"627a":function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return i}));s("28a5"),s("3b2b");var o=function(e,t,s){if(""!==t&&null!==t){var o=/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;o.test(t)||s(new Error("请输入有效的邮箱"))}else s(new Error("请输入有效的邮箱"));s()},i=function(e,t,s){console.log(t),null!=t&&""!=t.trim()||s(new Error("请输入字符")),s()}},8691:function(e,t,s){"use strict";s.r(t);var o,i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Card",[s("Form",{ref:"fromcreat1",attrs:{model:e.formModel4.fields,rules:e.formModel4.rules,"label-position":"top"}},[s("dz-table",{staticClass:"carlist",attrs:{totalCount:e.formModel4.buslist.query.totalCount,pageSize:e.formModel4.buslist.query.pageSize},on:{"on-page-change":e.handlePageChanged2,"on-page-size-change":e.handlePageSizeChanged2}},[s("div",{attrs:{slot:"searcher"},slot:"searcher"},[s("section",{staticClass:"dnc-toolbar-wrap"},[s("Row",{attrs:{gutter:16}},[s("Col",{attrs:{span:"16"}},[s("Form",{attrs:{inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[s("FormItem",[s("Input",{staticStyle:{width:"150px"},attrs:{type:"text",search:"",clearable:!0,placeholder:"输入商机名称"},on:{"on-search":function(t){return e.handleSearchDispatch()}},model:{value:e.formModel4.buslist.query.kw,callback:function(t){e.$set(e.formModel4.buslist.query,"kw",t)},expression:"formModel4.buslist.query.kw"}}),s("Input",{staticStyle:{width:"150px"},attrs:{type:"text",search:"",clearable:!0,placeholder:"输入所属客户名称"},on:{"on-search":function(t){return e.handleSearchDispatch()}},model:{value:e.formModel4.buslist.query.kw1,callback:function(t){e.$set(e.formModel4.buslist.query,"kw1",t)},expression:"formModel4.buslist.query.kw1"}}),s("Select",{staticStyle:{width:"150px"},attrs:{filterable:"",clearable:!0,placeholder:"阶段"},on:{"on-change":e.handleSearchDispatch},model:{value:e.formModel4.buslist.query.stasources,callback:function(t){e.$set(e.formModel4.buslist.query,"stasources",t)},expression:"formModel4.buslist.query.stasources"}},e._l(e.formModel4.buslist.sources.stateSources,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.text))])})),1)],1)],1)],1),s("Col",{staticClass:"dnc-toolbar-btns",attrs:{span:"8"}},[s("ButtonGroup",{staticClass:"mr3"},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"delete",expression:"'delete'"}],staticClass:"txt-danger",attrs:{icon:"md-trash",title:"删除"},on:{click:function(t){return e.handleBatchCommand("delete")}}})],1),s("Button",{directives:[{name:"can",rawName:"v-can",value:"buscreate",expression:"'buscreate'"}],attrs:{icon:"md-create",type:"primary",title:"添加商机信息"},on:{click:e.handleBusCreateWindow}},[e._v("添加商机信息")]),s("ButtonGroup",{staticClass:"mr3"},[s("Button",{attrs:{icon:"md-refresh",title:"刷新"},on:{click:e.loadBusList}})],1)],1)],1)],1)]),s("Table",{ref:"tables",attrs:{slot:"table",border:!1,size:"small","highlight-row":!0,data:e.formModel4.buslist.data,columns:e.formModel4.buslist.columns,"row-class-name":e.rowClsRender_xxx},on:{"on-select":e.BushandleSelect,"on-selection-change":e.BushandleSelectionChange},slot:"table",scopedSlots:e._u([{key:"state",fn:function(t){var o=t.row;t.index;return[s("span",[e._v(e._s(e.CheckState(o.state)))])]}},{key:"action",fn:function(t){var o=t.row;t.index;return[s("Tooltip",{attrs:{placement:"top",content:"编辑",delay:1e3,transfer:!0}},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"busedit",expression:"'busedit'"}],attrs:{type:"primary",size:"small",shape:"circle",icon:"md-create"},on:{click:function(t){return e.bushandleEdit(o)}}})],1),s("Tooltip",{attrs:{placement:"top",content:"详情",delay:1e3,transfer:!0}},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"busview",expression:"'busview'"}],attrs:{type:"success",size:"small",shape:"circle",icon:"md-search"},on:{click:function(t){return e.bushandleView(o)}}})],1),s("Tooltip",{attrs:{placement:"top",content:"联系记录",delay:1e3,transfer:!0}},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"buslog",expression:"'buslog'"}],attrs:{type:"warning",size:"small",shape:"circle",icon:"ios-cloud-upload"},on:{click:function(t){return e.bushandleLog(o)}}})],1),s("Tooltip",{attrs:{placement:"top",content:"商机文件",delay:1e3,transfer:!0}},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"busFile",expression:"'busFile'"}],attrs:{type:"primary",size:"small",shape:"circle",icon:"ios-cloud-upload"},on:{click:function(t){return e.bushandleFile(o)}}})],1)]}}])})],1)],1)],1),s("Drawer",{attrs:{title:e.formTitle1,width:"600","mask-closable":!1,mask:!0},model:{value:e.busEditModel.opened,callback:function(t){e.$set(e.busEditModel,"opened",t)},expression:"busEditModel.opened"}},[s("Form",{ref:"BusDispatchDetail",attrs:{model:e.busEditModel.mobile,"label-position":"left",rules:e.busEditModel.rules}},[s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"商机名称:",prop:"businessName"}},[s("Input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入商机名称"},model:{value:e.busEditModel.mobile.businessName,callback:function(t){e.$set(e.busEditModel.mobile,"businessName",t)},expression:"busEditModel.mobile.businessName"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"所属客户",prop:"clientUuid"}},[s("Select",{staticStyle:{width:"400px"},attrs:{filterable:""},on:{"on-change":e.lxr},model:{value:e.busEditModel.mobile.clientUuid,callback:function(t){e.$set(e.busEditModel.mobile,"clientUuid",t)},expression:"busEditModel.mobile.clientUuid"}},e._l(e.stores.contactPerson.sources.clientName,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),s("Row",{attrs:{gutter:16}},[e.kaiguan?s("FormItem",{attrs:{label:"相关联系人",prop:"roleUuid"}},[s("Select",{staticStyle:{width:"400px"},attrs:{multiple:""},on:{"on-change":e.testlxr},model:{value:e.lxrcunlist,callback:function(t){e.lxrcunlist=t},expression:"lxrcunlist"}},e._l(e.lxrlist,(function(t){return s("Option",{key:t.contactPersonUuid,attrs:{value:t.contactPersonUuid}},[e._v(e._s(t.contactName))])})),1)],1):e._e()],1),s("Row",{attrs:{gutter:16}},[s("Col",{staticStyle:{"margin-left":"-8px"},attrs:{span:"12"}},[s("FormItem",{attrs:{label:"商机来源:",prop:"businessSource"}},[s("Select",{staticStyle:{width:"150px"},model:{value:e.busEditModel.mobile.businessSource,callback:function(t){e.$set(e.busEditModel.mobile,"businessSource",t)},expression:"busEditModel.mobile.businessSource"}},e._l(e.busEditModel.pickerSource,(function(t){return s("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"商机类型:",prop:"businessType"}},[s("Select",{staticStyle:{width:"150px"},model:{value:e.busEditModel.mobile.businessType,callback:function(t){e.$set(e.busEditModel.mobile,"businessType",t)},expression:"busEditModel.mobile.businessType"}},e._l(e.busEditModel.pickerType,(function(t){return s("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"项目预算:",prop:"salesAmount"}},[s("Input",{staticStyle:{width:"85%"},attrs:{placeholder:"请输入项目预算"},model:{value:e.busEditModel.mobile.salesAmount,callback:function(t){e.$set(e.busEditModel.mobile,"salesAmount",t)},expression:"busEditModel.mobile.salesAmount"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("Col",{staticStyle:{"margin-left":"-8px"},attrs:{span:"12"}},[s("FormItem",{attrs:{label:"商机赢率:",prop:"winrate"}},[s("Select",{staticStyle:{width:"150px"},model:{value:e.busEditModel.mobile.winrate,callback:function(t){e.$set(e.busEditModel.mobile,"winrate",t)},expression:"busEditModel.mobile.winrate"}},e._l(e.busEditModel.pickerWinrate,(function(t){return s("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1),s("Col",{attrs:{span:"12"}},[s("FormItem",{attrs:{label:"商机阶段:",prop:"businessStage"}},[s("Select",{staticStyle:{width:"150px"},model:{value:e.busEditModel.mobile.businessStage,callback:function(t){e.$set(e.busEditModel.mobile,"businessStage",t)},expression:"busEditModel.mobile.businessStage"}},e._l(e.busEditModel.pickerStage,(function(t){return s("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])})),1)],1)],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"预计成交时间",prop:"checkTime"}},[s("DatePicker",{staticStyle:{width:"150px"},attrs:{format:"yyyy-MM-dd",type:"date",placeholder:"预计成交时间"},on:{"on-change":function(t){e.busEditModel.mobile.checkTime=t}},model:{value:e.busEditModel.mobile.checkTime,callback:function(t){e.$set(e.busEditModel.mobile,"checkTime",t)},expression:"busEditModel.mobile.checkTime"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"备注:"}},[s("Input",{staticStyle:{width:"85%","margin-left":"4%"},attrs:{type:"textarea",placeholder:"备注信息"},model:{value:e.busEditModel.mobile.remarks,callback:function(t){e.$set(e.busEditModel.mobile,"remarks",t)},expression:"busEditModel.mobile.remarks"}})],1)],1)],1),s("div",{staticClass:"demo-drawer-footer"},[s("Button",{attrs:{icon:"md-checkmark-circle",type:"primary"},on:{click:e.busClick}},[e._v("保 存")]),s("Button",{staticStyle:{"margin-left":"30px"},attrs:{icon:"md-close"},on:{click:function(t){e.busEditModel.opened=!1}}},[e._v("取 消")])],1)],1),s("Drawer",{attrs:{title:"查看商机信息",width:"600","mask-closable":!1,mask:!1},model:{value:e.busViewModel.opened,callback:function(t){e.$set(e.busViewModel,"opened",t)},expression:"busViewModel.opened"}},[s("Form",{ref:"formCarDispatchDetail",attrs:{model:e.busViewModel.query,"label-position":"left"}},[s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"商机名称"}},[s("Input",{attrs:{readonly:!0},model:{value:e.busViewModel.query.businessName,callback:function(t){e.$set(e.busViewModel.query,"businessName",t)},expression:"busViewModel.query.businessName"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"所属客户"}},[s("Input",{attrs:{readonly:!0},model:{value:e.busViewModel.query.clientName,callback:function(t){e.$set(e.busViewModel.query,"clientName",t)},expression:"busViewModel.query.clientName"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"商机来源"}},[s("Input",{attrs:{readonly:!0},model:{value:e.busViewModel.query.businessSource,callback:function(t){e.$set(e.busViewModel.query,"businessSource",t)},expression:"busViewModel.query.businessSource"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"商机类型"}},[s("Input",{attrs:{readonly:!0},model:{value:e.busViewModel.query.businessType,callback:function(t){e.$set(e.busViewModel.query,"businessType",t)},expression:"busViewModel.query.businessType"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"项目预算"}},[s("Input",{attrs:{readonly:!0},model:{value:e.busViewModel.query.salesAmount,callback:function(t){e.$set(e.busViewModel.query,"salesAmount",t)},expression:"busViewModel.query.salesAmount"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"商机赢率"}},[s("Input",{attrs:{readonly:!0},model:{value:e.busViewModel.query.winrate,callback:function(t){e.$set(e.busViewModel.query,"winrate",t)},expression:"busViewModel.query.winrate"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"商机阶段"}},[s("Input",{attrs:{readonly:!0},model:{value:e.busViewModel.query.businessStage,callback:function(t){e.$set(e.busViewModel.query,"businessStage",t)},expression:"busViewModel.query.businessStage"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"预计成交时间"}},[s("Input",{attrs:{readonly:!0},model:{value:e.busViewModel.query.checkTime,callback:function(t){e.$set(e.busViewModel.query,"checkTime",t)},expression:"busViewModel.query.checkTime"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"备注"}},[s("Input",{attrs:{readonly:!0},model:{value:e.busViewModel.query.remarks,callback:function(t){e.$set(e.busViewModel.query,"remarks",t)},expression:"busViewModel.query.remarks"}})],1)],1)],1),s("div",{staticClass:"demo-drawer-footer"},[s("Button",{staticStyle:{"margin-left":"30px"},attrs:{icon:"md-close"},on:{click:function(t){e.busViewModel.opened=!1}}},[e._v("取 消")])],1)],1),s("Drawer",{attrs:{title:"联系记录列表",width:"800","mask-closable":!1,mask:!1},model:{value:e.formModelLog.opened,callback:function(t){e.$set(e.formModelLog,"opened",t)},expression:"formModelLog.opened"}},[s("Form",{ref:"fromcreat12",attrs:{model:e.formModelLog.fields,rules:e.formModelLog.rules,"label-position":"top"}},[s("dz-table",{staticClass:"carlist",attrs:{totalCount:e.formModelLog.buslist.query.totalCount,pageSize:e.formModelLog.buslist.query.pageSize},on:{"on-page-change":e.handlePageChanged4,"on-page-size-change":e.handlePageSizeChanged4}},[s("div",{staticStyle:{"text-align":"right"},attrs:{slot:"searcher"},slot:"searcher"},[s("section",{staticClass:"dnc-toolbar-wrap"},[s("Row",{attrs:{gutter:16}},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"buscreate",expression:"'buscreate'"}],attrs:{icon:"md-create",type:"primary",title:"添加联系记录"},on:{click:e.handleCreatelianxirenLog}},[e._v("添加联系记录")])],1)],1)]),s("Table",{ref:"tables",attrs:{slot:"table",border:!1,size:"small","highlight-row":!0,data:e.formModelLog.buslist.data,columns:e.formModelLog.buslist.columns,"row-class-name":e.rowClsRender_xxx},on:{"on-select":e.BushandleSelect1,"on-selection-change":e.BushandleSelectionChange1},slot:"table",scopedSlots:e._u([{key:"state",fn:function(t){var o=t.row;t.index;return[s("span",[e._v(e._s(e.CheckState(o.state)))])]}},{key:"action",fn:function(t){var o=t.row;t.index;return[s("Poptip",{attrs:{confirm:"",transfer:!0,title:"确定要删除吗?"},on:{"on-ok":function(t){return e.lianxijiluDelete(o)}}},[s("Tooltip",{attrs:{placement:"top",content:"删除",delay:1e3,transfer:!0}},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"delete",expression:"'delete'"}],attrs:{type:"error",size:"small",shape:"circle",icon:"md-trash"}})],1)],1)]}}])})],1)],1),s("div",{staticClass:"demo-drawer-footer"},[s("Button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"md-close"},on:{click:e.doCancel_xxx}},[e._v("取 消")])],1)],1),s("Drawer",{attrs:{title:"添加联系记录",width:"600","mask-closable":!1,mask:!0},model:{value:e.formMode2New.opened,callback:function(t){e.$set(e.formMode2New,"opened",t)},expression:"formMode2New.opened"}},[s("Form",{ref:"formdispatccc2",attrs:{model:e.formMode2New.fields,rules:e.formMode2New.rules,"label-position":"top"}},[s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"客户",prop:"clientName"}},[s("Input",{attrs:{readonly:!0},model:{value:e.formMode2New.fields.clientName,callback:function(t){e.$set(e.formMode2New.fields,"clientName",t)},expression:"formMode2New.fields.clientName"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"商机",prop:"businessName"}},[s("Input",{attrs:{readonly:!0},model:{value:e.formMode2New.fields.businessName,callback:function(t){e.$set(e.formMode2New.fields,"businessName",t)},expression:"formMode2New.fields.businessName"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"联系人",prop:"contactPersonUuid"}},[s("Select",{attrs:{filterable:""},model:{value:e.formMode2New.fields.contactPersonUuid,callback:function(t){e.$set(e.formMode2New.fields,"contactPersonUuid",t)},expression:"formMode2New.fields.contactPersonUuid"}},e._l(this.formMode2New.contact,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"联系内容",prop:"callContent"}},[s("Input",{attrs:{type:"textarea",placeholder:"联系内容"},model:{value:e.formMode2New.fields.callContent,callback:function(t){e.$set(e.formMode2New.fields,"callContent",t)},expression:"formMode2New.fields.callContent"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"联系时间",prop:"callTime"}},[s("Date-picker",{staticStyle:{width:"200px"},attrs:{type:"datetime",value:e.datetimeNow,format:"yyyy-MM-dd HH:mm",placeholder:"请选择日期和时间"},on:{"on-change":function(t){e.formMode2New.fields.callTime=t}}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{staticStyle:{width:"150px"},attrs:{label:"联系方式",prop:"contactDetailsUuid"}},[s("Select",{model:{value:e.formMode2New.fields.contactDetailsUuid,callback:function(t){e.$set(e.formMode2New.fields,"contactDetailsUuid",t)},expression:"formMode2New.fields.contactDetailsUuid"}},e._l(e.stores.contactPerson.sources.cityList1,(function(t){return s("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])})),1)],1)],1)],1),s("div",{staticClass:"demo-drawer-footer"},[s("Button",{attrs:{icon:"md-checkmark-circle",type:"primary"},on:{click:e.lianxirenLogCreate}},[e._v("保 存")]),s("Button",{staticStyle:{"margin-left":"30px"},attrs:{icon:"md-close"},on:{click:function(t){e.formMode2New.opened=!1}}},[e._v("取 消")])],1)],1),s("Drawer",{attrs:{title:"商机文件目录",width:"900","mask-closable":!1,mask:!0},model:{value:e.busModelFile.opened,callback:function(t){e.$set(e.busModelFile,"opened",t)},expression:"busModelFile.opened"}},[s("Form",{ref:"filefrombus",attrs:{model:e.busModelFile.fields,rules:e.busModelFile.rules,"label-position":"top"}}),s("Card",[s("dz-table",{attrs:{totalCount:e.stores.file.query.totalCount,pageSize:e.stores.file.query.pageSize},on:{"on-page-change":e.handleFilePageChanged,"on-page-size-change":e.handleFilePageSizeChanged}},[s("div",{attrs:{slot:"searcher"},slot:"searcher"},[s("section",{staticClass:"dnc-toolbar-wrap"},[s("Row",{attrs:{gutter:16}},[s("Col",{attrs:{span:"16"}},[s("Form",{attrs:{inline:""},nativeOn:{submit:function(e){e.preventDefault()}}},[s("FormItem",[s("Input",{attrs:{type:"text",search:"",clearable:!0,placeholder:"输入关键字搜索..."},on:{"on-search":function(t){return e.handleSearchFile()}},model:{value:e.stores.file.query.kw,callback:function(t){e.$set(e.stores.file.query,"kw",t)},expression:"stores.file.query.kw"}})],1)],1)],1),s("Col",{staticClass:"dnc-toolbar-btns",attrs:{span:"8"}},[s("ButtonGroup",{staticClass:"mr3"},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"delete",expression:"'delete'"}],staticClass:"txt-danger",attrs:{icon:"md-trash",title:"删除"},on:{click:function(t){return e.handleFileBatchCommand("delete")}}}),s("Button",{attrs:{icon:"md-refresh",title:"刷新"},on:{click:e.handleFileRefresh}})],1),s("Button",{directives:[{name:"can",rawName:"v-can",value:"create",expression:"'create'"}],attrs:{icon:"md-create",type:"primary",title:"新增文件"},on:{click:e.handleFileShowCreateWindow}},[e._v("新增文件")])],1)],1)],1)]),s("Table",{ref:"tables",attrs:{slot:"table",border:!1,size:"small","highlight-row":!0,data:e.stores.file.data,columns:e.stores.file.columns,"row-class-name":e.rowClsRenderFile},on:{"on-select":e.handleFileSelect,"on-selection-change":e.handleFileSelectionChange,"on-refresh":e.handleFileRefresh,"on-page-change":e.handleFilePageChanged,"on-page-size-change":e.handleFilePageSizeChanged,"on-sort-change":e.handleFileSortChange},slot:"table",scopedSlots:e._u([{key:"fileAction",fn:function(t){var o=t.row;t.index;return[s("Poptip",{attrs:{confirm:"",transfer:!0,title:"确定要删除吗?"},on:{"on-ok":function(t){return e.handleFileDelete(o)}}},[s("Tooltip",{attrs:{placement:"top",content:"删除",delay:1e3,transfer:!0}},[s("Button",{directives:[{name:"can",rawName:"v-can",value:"delete1",expression:"'delete1'"}],attrs:{type:"error",size:"small",shape:"circle",icon:"md-trash"}})],1)],1),s("Tooltip",{attrs:{placement:"top",content:"编辑",delay:1e3,transfer:!0}},[s("Button",{attrs:{type:"primary",size:"small",shape:"circle",icon:"md-create"},on:{click:function(t){return e.handleFileEdit(o)}}})],1),s("Button",{attrs:{type:"primary",size:"small",shape:"circle",icon:"md-arrow-down"},on:{click:function(t){return e.handleFileDown(o)}}})]}}])})],1)],1)],1),s("Drawer",{attrs:{title:e.formFileTitle,width:"400","mask-closable":!1,mask:!0},model:{value:e.busModelFile.formopened,callback:function(t){e.$set(e.busModelFile,"formopened",t)},expression:"busModelFile.formopened"}},[s("Form",{ref:"formFile",attrs:{model:e.busModelFile.fields,rules:e.busModelFile.rules,"label-position":"top"}},[s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"文件名称",prop:"fileName"}},[s("Input",{attrs:{readonly:"show"==e.busModelFile.mode},model:{value:e.busModelFile.fields.fileName,callback:function(t){e.$set(e.busModelFile.fields,"fileName",t)},expression:"busModelFile.fields.fileName"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("FormItem",{attrs:{label:"文件简介",prop:"fileInfo"}},[s("Input",{attrs:{autosize:!0,readonly:"show"==e.busModelFile.mode,type:"textarea"},model:{value:e.busModelFile.fields.fileInfo,callback:function(t){e.$set(e.busModelFile.fields,"fileInfo",t)},expression:"busModelFile.fields.fileInfo"}})],1)],1),s("Row",{attrs:{gutter:16}},[s("Upload",{ref:"upload",staticStyle:{float:"left"},attrs:{action:e.actionurl,headers:e.postheaders,"show-upload-list":!0,"on-success":e.showUpResult,"on-progress":e.toUpResult,disabled:e.updisabled,"on-remove":e.deleteFile}},[s("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline",loading:e.loadingStatus}},[e._v("上传文件")])],1)],1)],1),s("div",{staticClass:"demo-drawer-footer"},[s("Button",{attrs:{icon:"md-checkmark-circle",type:"primary"},on:{click:e.handleSubmitFile}},[e._v("保 存")]),s("Button",{staticStyle:{"margin-left":"8px"},attrs:{icon:"md-close"},on:{click:function(t){e.busModelFile.formopened=!1}}},[e._v("取 消")])],1)],1)],1)},a=[],n=(s("a481"),s("28a5"),s("55dd"),s("bd86")),l=(s("21a6"),s("dc44")),r=s("a398"),u=s("d79f"),d=s("66df"),c=function(e){return d["a"].request({url:"business/BusinessDocuments/list",method:"post",data:e})},m=function(e){return d["a"].request({url:"business/BusinessDocuments/create",method:"post",data:e})},h=function(e){return d["a"].request({url:"business/BusinessDocuments/edit/"+e.guid,method:"get"})},f=function(e){return d["a"].request({url:"business/BusinessDocuments/edit",method:"post",data:e})},b=function(e){return d["a"].request({url:"business/BusinessDocuments/delete/"+e,method:"get"})},p=function(e){return d["a"].request({url:"business/BusinessDocuments/batch",method:"get",params:e})},g=s("f121"),M=s("c276"),w=s("627a"),y={name:"homeaddress",components:{DzTable:l["a"]},data:function(){return{datetimeNow:"",userGuid:"",userName:"",panduanrowid:0,rowid:"",usName:"",usGuid:"",shangjiUuid:"",contactName:"",clientName:"",callLogUuid:"",clientUuid:"",businessUuid:"",businessName:"",lxrlist:[],lxrcunlist:[],lclist:[],connamelist:[],kaiguan:!0,commands:{delete:{name:"delete",title:"删除"}},formModelcanyu:{opened:!1,title:"选择人员",mode:"select",fields:{participantleft:[],participantright:[]}},formMode2New:{opened:!1,title:"创建申请",mode:"create",selection:[],fields:{callLogUuid:"",clientUuid:"",contactPersonUuid:"",callContent:"",callTime:"",callResults:"",remarks:"",contactName:"",clientName:"",businessUuid:"",businessUuidName:"",businessName:"",contactDetailsUuid:"",contactDetailsText:"",userName:"",userGuid:"",contactBusName:""},rules:{callContent:[{type:"string",required:!0,message:"请填写联系内容"}],callTime:[{type:"string",required:!0,message:"请选择联系时间"}],contactPersonUuid:[{type:"string",required:!0,message:"请选择联系人"}]},contact:[],client:[],business:[]},formModel4:{selection:[],opened:!1,title:"商机列表",buslist:{query:{totalCount:0,pageSize:20,currentPage:1,isDelete:0,status:-1,stasources:"",kw:"",kw1:"",sysUuid:"",ClientUUID:"",sort:[{direct:"DESC",field:"ID"}]},sources:{stateSources:[{value:"沟通调研",text:"沟通调研"},{value:"方案策划",text:"方案策划"},{value:"招投标",text:"招投标"},{value:"合同签订",text:"合同签订"},{value:"已关闭",text:"已关闭"}]},columns:[{type:"selection",width:35,key:"businessUuid"},{title:"商机名称",key:"businessName",minWidth:100,sortable:!0},{title:"所属客户",key:"clientName",minWidth:100,sortable:!0},{title:"客户经理",key:"clientManager",minWidth:90,maxWidth:100,sortable:!0},{title:"相关联系人",key:"systemUserName",minWidth:100,sortable:!0},{title:"项目预算",key:"salesAmount",minWidth:95,maxWidth:100,sortable:!0},{title:"商机阶段",key:"businessStage",minWidth:80,maxWidth:110,sortable:!0},{title:"预计成交时间",key:"checkTime",minWidth:100,maxWidth:150,sortable:!0},{title:"操作",align:"center",fixed:"right",width:120,className:"table-command-column",slot:"action"}],data:[]},styles:{}},formModelLog:{selection:[],opened:!1,title:"商机联系记录列表",buslist:{query:{totalCount:0,pageSize:20,currentPage:1,isDelete:0,status:-1,kw:"",kw1:"",guid:"",ClientUUID:"",sort:[{direct:"DESC",field:"ID"}]},sources:{},columns:[{type:"selection",width:50,key:"businessUuid"},{title:"商机名称",key:"businessName",minWidth:100,sortable:!0},{title:"联系人",key:"contactName",minWidth:80,sortable:!0},{title:"所属客户",key:"clientName",minWidth:100,sortable:!0},{title:"联系内容",key:"callContent",minWidth:200,sortable:!0},{title:"联系时间",key:"callTime",minWidth:140,sortable:!0},{title:"联系方式",key:"contactDetailsName",minWidth:100,sortable:!0},{title:"操作",align:"center",fixed:"right",minWidth:50,className:"table-command-column",slot:"action"}],data:[]},styles:{}},busEditModel:{opened:!1,title:"修改商机",mode:"edit",Prioritylist:{picker:[{clientUuid:"",clientName:""}],index2:-1},pickerSource:["独立开发","客户介绍","其它广告","来电咨询"],pickerType:["普通机会","重要机会","特殊机会"],pickerStage:["沟通调研","方案策划","招投标","合同签订","已关闭"],pickerWinrate:[],mobile:{clientUuid:"",businessStage:"",salesAmount:"",winrate:"",businessSource:"",businessType:"",checkTime:"",remarks:"",businessName:"",businessUuid:"",systemUserName:"",systemUserUuid:"",userName:"",userGuid:"",contactBusName:""},rules:{businessName:[{type:"string",required:!0,message:"请输入名称"}],clientUuid:[{type:"string",required:!0,message:"请选择客户"}]}},busViewModel:{selection:[],title:"查看商机",opened:!1,mode:"",query:{businessName:"",businessSource:"",businessType:"",salesAmount:"",winrate:"",businessStage:"",checkTime:"",remarks:"",clientName:"",realName:"",systemUserName:""}},url:"",actionurl:"",postheaders:"",updisabled:!1,loadingStatus:!1,busModelFile:{dFileName:"",selection:[],title:"商机文件目录",opened:!1,formopened:!1,mode:"",fields:{busDocumentsUuid:"",fileName:"",fileInfo:"",fileUrl:"",businessUuid:"",clientUuid:"",contactPersonUuid:"",addTime:"",isDelete:""},rules:{fileName:[{validator:w["b"],type:"string",required:!0,message:"请输入文件名"}]}},stores:{contactPerson:Object(n["a"])({sources:{clientName:[{value:"",label:""}],cityList1:[{value:"微信",label:"微信"},{value:"QQ",label:"QQ"},{value:"电话",label:"电话"},{value:"面谈",label:"面谈"},{value:"邮件",label:"邮件"}]},query:{totalCount:0,pageSize:20,currentPage:1,isDeleted:0,status:-1,kw:"",kw1:"",kw2:"",sort:[{direct:"DESC",field:"ID"}]},data:[],columns:[{type:"selection",width:50,key:"businessUuid"},{title:"商机名称",key:"businessName",minWidth:100,sortable:!0},{title:"商机赢率",key:"winrate",minWidth:100,sortable:!0},{title:"商机阶段",key:"businessStage",minWidth:100,sortable:!0},{title:"预计成交时间",key:"checkTime",minWidth:100,sortable:!0},{title:"操作",align:"center",fixed:"right",width:80,className:"table-command-column",slot:"action"}]},"data",[]),file:{query:{totalCount:0,pageSize:20,currentPage:1,businessUuid:"",kw:"",isDeleted:0,status:-1,sort:[{direct:"DESC",field:"ID"}]},sources:{},columns:[{type:"selection",width:50,key:"handle"},{title:"文件名称",key:"fileName",minWidth:100,sortable:!0},{title:"文件简介",key:"fileInfo",minWidth:100,ellipsis:!0},{title:"上传时间",key:"addTime",minWidth:80,maxWidth:140},{title:"操作",align:"center",fixed:"right",width:120,className:"table-command-column",slot:"fileAction"}],data:[]},xxx2:{}},styles:{}}},computed:{formTitle1:function(){return"create"===this.busEditModel.mode?"添加商机信息":"edit"===this.busEditModel.mode?"编辑商机信息":""},formFileTitle:function(){return"create"===this.busModelFile.mode?"添加商机文件信息":"edit"===this.busModelFile.mode?"编辑商机文件信息":"show"===this.busModelFile.mode?"商机文件信息详情":""},selectRusRowsId:function(){return this.formModel4.selection.map((function(e){return e.businessUuid}))},selectFileRowsId:function(){return this.busModelFile.selection.map((function(e){return e.busDocumentsUuid}))}},methods:(o={testlxr:function(e){this.formMode2New.fields.contactBusName=e.join(","),this.busEditModel.mobile.contactBusName=e.join(","),console.log(e)},lxr:function(e){null!=e&&this.doloadlxrList(e)},loadListAddress:function(){var e=this;console.log(12356),this.usName=this.$store.state.user.userName,this.usGuid=this.$store.state.user.userGuid,this.formModel4.buslist.query.sysUuid=this.$store.state.user.userGuid,Object(u["z"])(this.formModel4.buslist.query).then((function(t){console.log(t),e.formModel4.buslist.data=t.data.data,e.formModel4.buslist.query.totalCount=t.data.totalCount}))},loaselect:function(){var e=this;Object(u["w"])().then((function(t){e.formModelcanyu.fields.participantleft=t.data.data}))},selectcanyu:function(e){var t=this;console.log(e),this.formModelcanyu.opened=!0,""!=e&&Object(u["k"])({id:e}).then((function(s){if(console.log(369),t.panduanrowid!=e&&(t.formModelcanyu.fields.participantright=[]),0==t.formModelcanyu.fields.participantright.length&&s.data.data.length>0)for(var o=0;o<s.data.data.length;o++)t.formModelcanyu.fields.participantright=t.formModelcanyu.fields.participantright.concat(s.data.data[o].key);t.panduanrowid=e}))},handleSchoolChange:function(e,t,s){this.formModelcanyu.fields.participantright=e,this.busEditModel.mobile.systemUserName=this.busEditModel.mobile.systemUserUuid="";for(var o=0;o<this.formModelcanyu.fields.participantright.length;o++)for(var i=0;i<this.formModelcanyu.fields.participantleft.length;i++)this.formModelcanyu.fields.participantright[o]===this.formModelcanyu.fields.participantleft[i].key&&(this.busEditModel.mobile.systemUserName+=this.formModelcanyu.fields.participantleft[i].label+",",this.busEditModel.mobile.systemUserUuid+=this.formModelcanyu.fields.participantleft[i].key+",");console.log(this.formModelcanyu.fields.participantright)},loadBusList:function(){this.loadListAddress()},handleCreatelianxirenLog:function(){this.lxrlist=[],this.lxrcunlist=[],this.formMode2New.contact=[],this.handleSwitchFormModeToCreate(),this.handleOpenFormWindow(),this.handleResetFormDispatch(),this.formMode2New.fields.userName=this.usName,this.formMode2New.fields.userGuid=this.usGuid,this.formMode2New.fields.contactName=this.contactName,this.formMode2New.fields.clientName=this.clientName,this.formMode2New.fields.callLogUuid=this.callLogUuid,this.formMode2New.fields.clientUuid=this.clientUuid,this.formMode2New.fields.businessUuid=this.businessUuid,this.formMode2New.fields.businessName=this.businessName,this.shangjilianxiren(this.formMode2New.fields.clientUuid);var e=new Date;this.datetimeNow=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes(),this.formMode2New.fields.callTime=this.datetimeNow},shangjilianxiren:function(e){var t=this;Object(r["h"])({guid:e}).then((function(e){console.log(e),t.formMode2New.contact=e.data.data}))},doloadlxrList:function(e){var t=this;this.lxrcunlist=[],Object(r["m"])({guid:e}).then((function(e){console.log(365),console.log(e),t.lxrlist=e.data.data,t.lxrcunlist=t.connamelist}))},shangjiLog:function(){var e=this,t=this.shangjiUuid;Object(u["f"])(t).then((function(t){e.formMode2New.fields=t.data.data[0],console.log(e.formMode2New.fields)}))},handleSwitchFormModeToCreate:function(){this.formMode2New.mode="create"},handleResetFormDispatch:function(){this.$refs["formdispatccc2"].resetFields()},docreateCarDispatch:function(){var e=this;Object(r["b"])(this.formMode2New.fields).then((function(t){200===t.data.code?(e.$Message.success(t.data.message),e.handleResetFormDispatch(),e.handleCloseFormWindow(),e.formMode2New.opened=!1,e.formModelLog.opened=!1):e.$Message.warning(t.data.message)}))},lianxirenLogCreate:function(){var e=this.validateDispatchForm();e&&"create"===this.formMode2New.mode&&this.docreateCarDispatch()},validateDispatchForm:function(){var e=this,t=!1;return this.$refs["formdispatccc2"].validate((function(s){s?t=!0:e.$Message.error("请完善表单信息")})),t},handleOpenFormWindow:function(){this.formMode2New.opened=!0},handleCloseFormWindow:function(){this.formMode2New.opened=!1},handleEdit:function(e){this.handleOpenFormWindow1(),this.handleSwitchFormModeToEdit(),this.handleResetFormDispatch1(),this.doLoadEditData(e.contactPersonUuid)},handleSwitchFormModeToEdit:function(){this.formModel.mode="edit"},doLoadEditData:function(e){var t=this;Object(r["j"])({guid:e}).then((function(e){t.formModel.fields=e.data.data}))},doEditDispatch:function(){var e=this;Object(r["e"])(this.formModel.fields).then((function(t){200===t.data.code?(e.$Message.success(t.data.message),e.handleCloseFormWindow1(),e.loadListAddress()):e.$Message.warning(t.data.message)}))},btnClickEdit:function(){this.doEditDispatch()},handleResetFormDispatch1:function(){this.$refs["formCarDispatchDetail"].resetFields()},handleOpenFormWindow1:function(){this.formModel.opened=!0},handleCloseFormWindow1:function(){this.formModel.opened=!1},handleDelete:function(e){this.doDelete(e.contactPersonUuid)},doDelete:function(e){var t=this;Object(r["c"])(e).then((function(e){200===e.data.code?(t.$Message.success(e.data.message),t.loadListAddress()):t.$Message.warning(e.data.message)}))},rowClsRender_Address:function(e,t){},handleRefresh_Address:function(){this.loadListAddress()},handleSelect:function(e,t){},handleSelectionChange:function(e){this.formModel.selection=e},handleSortChange:function(e){this.stores.contactPerson.query.sort.direction=e.order,this.stores.contactPerson.query.sort.field=e.key,this.loadVoteinitiateList()},handleSearchDispatch:function(){this.loadListAddress()},handlePageChanged:function(e){this.stores.contactPerson.query.currentPage=e,this.loadListAddress()},handlePageSizeChanged:function(e){this.stores.contactPerson.query.pageSize=e,this.loadListAddress()},loadDepartmentList1:function(){var e=this;Object(r["g"])().then((function(t){e.stores.contactPerson.sources.clientName=t.data.data}))},handleBusCreateWindow:function(){this.lxrlist=[],this.lxrcunlist=[],this.kaiguan=!0,this.busEditModel.mobile.userName=this.usName,this.busEditModel.mobile.userGuid=this.usGuid,this.busEditModel.opened=!0,this.BusFormModeToCreate(),this.handleBusDispatchDetail();for(var e=0;e<101;e++)this.busEditModel.pickerWinrate[e]=e+"%";this.busEditModel.mobile.clientUuid=this.formModel4.buslist.query.ClientUUID},BusFormModeToCreate:function(){this.busEditModel.mode="create"},handleBusDispatchDetail:function(){this.$refs["BusDispatchDetail"].resetFields()},bushandleView:function(e){var t=this;this.busViewModel.opened=!0;var s=e.businessUuid;Object(u["d"])(s).then((function(e){200==e.data.code&&(t.busViewModel.query=e.data.data[0])}))},lianxijiluDelete:function(e){this.DeleLog(e.callLogUuid)},DeleLog:function(e){var t=this;console.log(e),Object(r["d"])({ids:e,usName:this.$store.state.user.userName}).then((function(e){200===e.data.code?(t.$Message.success(e.data.message),t.loadListAddress(),t.formMode2New.opened=!1,t.formModelLog.opened=!1):t.$Message.warning(e.data.message)}))},bushandleLog:function(e){var t=this;this.formModelLog.opened=!0,this.$refs["fromcreat12"].resetFields(),this.shangjiUuid=e.businessUuid,this.contactName=e.contactName,this.clientName=e.clientName,this.callLogUuid=e.callLogUuid,this.clientUuid=e.clientUuid,this.businessUuid=e.businessUuid,this.businessName=e.businessName,this.formModelLog.buslist.query.guid=e.businessUuid,Object(u["e"])(this.formModelLog.buslist.query).then((function(e){t.formModelLog.buslist.data=e.data.data,t.formModelLog.buslist.query.totalCount=e.data.totalCount}))},bushandleFile:function(e){console.log(11111),console.log(e),this.stores.file.query.businessUuid=e.businessUuid,this.busModelFile.opened=!0,this.loadFileList()},BusFormModeToEdit:function(){this.busEditModel.mode="edit"},bushandleEdit:function(e){var t=this;this.kaiguan=!0,this.busEditModel.opened=!0,this.rowid=e.id,this.formModelcanyu.fields.participantright=[],this.BusFormModeToEdit(),this.$refs["BusDispatchDetail"].resetFields(),this.busEditModel.mobile.businessUuid=e.businessUuid,Object(u["p"])().then((function(e){t.busEditModel.Prioritylist.picker=e.data.data}));for(var s=0;s<101;s++)this.busEditModel.pickerWinrate[s]=s+"%";var o=e.businessUuid;Object(u["d"])(o).then((function(e){if(200==e.data.code&&(console.log(221),console.log(e),null!=e.data.data[0].contactBusName?t.connamelist=e.data.data[0].contactBusName.split(","):t.connamelist=[],console.log(t.connamelist),t.busEditModel.mobile=e.data.data[0],console.log(989),console.log(e.data.data),null!=e.data.data[0].clientUuid&&""!=e.data.data[0].clientUuid)){var s=e.data.data[0].clientUuid;t.doloadlxrList(s)}}))},busClickCreate:function(){var e=this;if(this.busEditModel.mobile.userName=this.$store.state.user.userName,this.busEditModel.mobile.userGuid=this.$store.state.user.userGuid,this.busEditModel.mobile.contactBusName=this.lxrcunlist,console.log(this.busEditModel.mobile.contactBusName),""!=this.busEditModel.mobile.businessName){var t=/^[^\s]+$/;if(t.test(this.busEditModel.mobile.businessName))if(""!=this.busEditModel.mobile.clientUuid){if(""!=this.busEditModel.mobile.salesAmount){var s=/^\d+$|^\d+[.]?\d+$/;if(!s.test(this.busEditModel.mobile.salesAmount))return void this.$Message.warning("金额输入不合法")}var o=this.busEditModel.mobile;console.log(o),Object(u["b"])(o).then((function(t){200==t.data.code?(e.$Message.success("商机添加成功"),e.busEditModel.opened=!1,e.loadBusList()):e.$Message.warning("商机添加失败")}))}else this.$Message.warning("请选择客户");else this.$Message.warning("商机名称不合法")}else this.$Message.warning("请填写商机名称！")},busClickEdit:function(){var e=this;if(""!=this.busEditModel.mobile.businessName){var t=/^[^\s]+$/;if(t.test(this.busEditModel.mobile.businessName))if(""!=this.busEditModel.mobile.clientUuid){if(""!=this.busEditModel.mobile.salesAmount){var s=/^\d+$|^\d+[.]?\d+$/;if(!s.test(this.busEditModel.mobile.salesAmount))return void this.$Message.warning("金额输入不合法")}this.busEditModel.mobile.userName=this.$store.state.user.userName,this.busEditModel.mobile.userGuid=this.$store.state.user.userGuid;var o=this.busEditModel.mobile;Object(u["c"])(o).then((function(t){200==t.data.code?(e.$Message.success("商机修改成功"),e.busEditModel.opened=!1,e.loadBusList()):e.$Message.warning("商机修改失败")}))}else this.$Message.warning("请选择所属客户");else this.$Message.warning("商机名称不合法")}else this.$Message.warning("请填写商机名称")},busClick:function(){"create"===this.busEditModel.mode&&this.busClickCreate(),"edit"===this.busEditModel.mode&&this.busClickEdit()},BushandleSelect:function(e,t){},BushandleSelectionChange:function(e){this.formModel4.selection=e},BushandleSelect1:function(e,t){},BushandleSelectionChange1:function(e){this.formModelLog.selection=e},handleBatchCommand:function(e){var t=this;!this.selectRusRowsId||this.selectRusRowsId.length<=0?this.$Message.warning("请选择至少一条数据"):this.$Modal.confirm({title:"操作提示",content:"<p>确定要执行当前 ["+this.commands[e].title+"] 操作吗?</p>",loading:!0,onOk:function(){t.doBatchCommand(e)}})},doBatchCommand:function(e){var t=this;Object(u["a"])({command:e,ids:this.selectRusRowsId.join(","),userName:this.$store.state.user.userName}).then((function(e){200===e.data.code?(t.$Message.success(e.data.message),t.loadBusList(),t.formModel4.selection=[]):t.$Message.warning(e.data.message),t.$Modal.remove()}))},handlePageChanged2:function(e){this.formModel4.buslist.query.currentPage=e,this.loadListAddress()},handlePageSizeChanged2:function(e){this.formModel4.buslist.query.pageSize=e,this.loadListAddress()},doCancel_xxx:function(){this.formModelLog.opened=!1},handlePageChanged4:function(e){this.formModel4.buslist.query.currentPage=e,this.loadListAddress()},handlePageSizeChanged4:function(e){this.formModel4.buslist.query.pageSize=e,this.loadListAddress()},rowClsRender_xxx:function(e,t){},rowClsRenderFile:function(e,t){},loadFileList:function(){var e=this;c(this.stores.file.query).then((function(t){console.log(t),e.stores.file.data=t.data.data,e.stores.file.query.totalCount=t.data.totalCount}))},handleFileRefresh:function(){this.loadFileList()},handleFileSelect:function(e,t){},handleFileSelectionChange:function(e){this.busModelFile.selection=e},handleFilePageChanged:function(e){this.stores.file.query.currentPage=e,this.loadFileList()},handleFilePageSizeChanged:function(e){this.stores.file.query.pageSize=e,this.loadFileList()},handleSearchFile:function(){this.loadFileList()}},Object(n["a"])(o,"doDelete",(function(e){var t=this;e?b(e).then((function(e){200===e.data.code?(t.$Message.success(e.data.message),t.loadFileList(),t.busModelFile.selection=[]):t.$Message.warning(e.data.message)})):this.$Message.warning("请选择至少一条数据")})),Object(n["a"])(o,"handleFileBatchCommand",(function(e){var t=this;!this.selectFileRowsId||this.selectFileRowsId.length<=0?this.$Message.warning("请选择至少一条数据"):this.$Modal.confirm({title:"操作提示",content:"<p>确定要执行当前 ["+this.commands[e].title+"] 操作吗?</p>",loading:!0,onOk:function(){t.doFileBatchCommand(e)}})})),Object(n["a"])(o,"doFileBatchCommand",(function(e){var t=this;p({command:e,ids:this.selectFileRowsId.join(",")}).then((function(e){200===e.data.code?(t.$Message.success(e.data.message),t.loadFileList(),t.busModelFile.selection=[]):t.$Message.warning(e.data.message),t.$Modal.remove()}))})),Object(n["a"])(o,"handleFileSortChange",(function(e){this.stores.file.query.sort.direction=e.order,this.stores.file.query.sort.field=e.key,this.loadFileList()})),Object(n["a"])(o,"handleResetFormFile",(function(){this.busModelFile.fields.fileUrl="",this.busModelFile.fields.fileName="",this.busModelFile.fields.fileInfo=""})),Object(n["a"])(o,"handleOpenFormWindowFile",(function(){this.busModelFile.formopened=!0})),Object(n["a"])(o,"handleCloseFormWindowFile",(function(){this.busModelFile.formopened=!1})),Object(n["a"])(o,"handleSwitchFormModeToCreateFile",(function(){this.busModelFile.mode="create"})),Object(n["a"])(o,"handleSwitchFormModeToEditFile",(function(){this.busModelFile.mode="edit",this.handleOpenFormWindowFile()})),Object(n["a"])(o,"handleFileShowCreateWindow",(function(){this.busModelFile.dFileName="",this.$refs.upload.clearFiles(),this.handleSwitchFormModeToCreateFile(),this.handleOpenFormWindowFile(),this.handleResetFormFile()})),Object(n["a"])(o,"handleFileEdit",(function(e){this.busModelFile.dFileName="",this.$refs.upload.fileList=[{name:"",status:"finished",showProgress:!1}],this.handleSwitchFormModeToEditFile(),this.handleResetFormFile(),this.doLoadFile(e.busDocumentsUuid)})),Object(n["a"])(o,"doLoadFile",(function(e){var t=this;h({guid:e}).then((function(e){t.busModelFile.fields=e.data.data,t.$refs.upload.fileList[0].name=t.busModelFile.fields.fileUrl.split("\\")[1],t.busModelFile.dFileName=e.data.data.path,t.url=g["a"].baseUrl.dev+t.busModelFile.fields.fileUrl.replace("\\","/")}))})),Object(n["a"])(o,"validateFileForm",(function(){var e=this,t=!1;return this.$refs["formFile"].validate((function(s){s?t=!0:e.$Message.error("请完善表单信息")})),t})),Object(n["a"])(o,"handleSubmitFile",(function(){if(console.log(this.stores.file.query.businessUuid),this.busModelFile.fields.businessUuid=this.stores.file.query.businessUuid,null!=this.busModelFile.fields.fileUrl&&""!=this.busModelFile.fields.fileUrl){var e=this.validateFileForm();e&&("create"===this.busModelFile.mode&&this.doCreateFile(),"edit"===this.busModelFile.mode&&this.doEditFile())}else this.$Message.warning("请上传文件")})),Object(n["a"])(o,"doCreateFile",(function(){var e=this;console.log(this.busModelFile.fields),m(this.busModelFile.fields).then((function(t){200===t.data.code?(e.$Message.success(t.data.message),e.handleCloseFormWindowFile(),e.loadFileList()):e.$Message.warning(t.data.message)}))})),Object(n["a"])(o,"doEditFile",(function(){var e=this;console.log(this.busModelFile.fields),f(this.busModelFile.fields).then((function(t){200===t.data.code?(e.$Message.success(t.data.message),e.handleCloseFormWindowFile(),e.loadFileList()):e.$Message.warning(t.data.message)}))})),Object(n["a"])(o,"handleFileDelete",(function(e){this.doDelete(e.busDocumentsUuid)})),Object(n["a"])(o,"handleFileDown",(function(e){console.log(e),window.location.href=g["a"].baseUrl.dev+e.fileUrl.replace("\\","/")})),Object(n["a"])(o,"showUpResult",(function(e){this.loadingStatus=!1,this.updisabled=!1,console.log(e),"200"==e.code?(this.$Message.success(e.message),this.busModelFile.fields.fileUrl=e.data.dataPath,this.busModelFile.dFileName=e.data.path,console.log(this.$refs.upload.fileList[0].name=e.data.dataPath.split("\\")[1]),console.log(this.busModelFile.dFileName)):this.$Message.warning(e.message)})),Object(n["a"])(o,"toUpResult",(function(){console.log(this.$refs.upload.fileList),this.$refs.upload.fileList.length>1&&this.$refs.upload.fileList.shift(),this.loadingStatus=!0,this.updisabled=!0})),Object(n["a"])(o,"deleteFile",(function(e){console.log(e),console.log(this.busModelFile.dFileName)})),Object(n["a"])(o,"download",(function(){window.location.href=g["a"].baseUrl.dev+this.busModelFile.fields.fileUrl.replace("\\","/")})),Object(n["a"])(o,"Is_xxx",(function(e){var t="未知";return t})),Object(n["a"])(o,"CheckState",(function(e){return 0==e?"否":1==e?"是":void 0})),Object(n["a"])(o,"dateToString",(function(e){var t=e.getFullYear(),s=e.getMonth()+1,o=e.getDate(),i=e.getHours(),a=e.getMinutes(),n=e.getSeconds();return t+"-"+s+"-"+o+" "+i+":"+a+":"+n})),o),created:function(){this.postheaders={Authorization:"Bearer "+Object(M["i"])()},this.actionurl=g["a"].baseUrl.dev+"api/v1/business/BusinessDocuments/UpLoad"},mounted:function(){this.loadDepartmentList1(),this.loadListAddress(),this.loaselect()}},v=y,C=(s("2743"),s("2877")),F=Object(C["a"])(v,i,a,!1,null,null,null);t["default"]=F.exports},a398:function(e,t,s){"use strict";s.d(t,"o",(function(){return i})),s.d(t,"f",(function(){return a})),s.d(t,"c",(function(){return n})),s.d(t,"h",(function(){return l})),s.d(t,"i",(function(){return r})),s.d(t,"m",(function(){return u})),s.d(t,"a",(function(){return d})),s.d(t,"b",(function(){return c})),s.d(t,"j",(function(){return m})),s.d(t,"k",(function(){return h})),s.d(t,"l",(function(){return f})),s.d(t,"e",(function(){return b})),s.d(t,"g",(function(){return p})),s.d(t,"d",(function(){return g})),s.d(t,"n",(function(){return M}));s("7f7f");var o=s("66df"),i=function(e){return console.log(e),o["a"].request({url:"Contact/Contact/shopInfoImport",method:"post",data:e})},a=function(e){return o["a"].request({url:"Contact/Contact/list",method:"post",data:e})},n=function(e){return o["a"].request({url:"Contact/Contact/delete?ids="+e.ids+"&usName="+e.usName,method:"get"})},l=function(e){return o["a"].request({url:"Contact/Contact/jiekoulxr?guid="+e.guid,method:"get"})},r=function(e){return o["a"].request({url:"Contact/Contact/jiekoushangji?guid="+e.guid,method:"get"})},u=function(e){return o["a"].request({url:"Contact/Contact/loadSimpleList?guid="+e.guid,method:"get"})},d=function(e){return o["a"].request({url:"Contact/Contact/Create",method:"post",data:e})},c=function(e){return o["a"].request({url:"Contact/Contact/Create2",method:"post",data:e})},m=function(e){return o["a"].request({url:"Contact/Contact/getEdit/"+e.guid,method:"get"})},h=function(e){return o["a"].request({url:"Contact/Contact/getEdit2?guid="+e.guid+"&name="+e.name,method:"get"})},f=function(e){return o["a"].request({url:"Contact/Contact/loadEditDataXQ?guid="+e.guid,method:"get"})},b=function(e){return o["a"].request({url:"Contact/Contact/edit",method:"post",data:e})},p=function(e){return o["a"].request({url:"Contact/Contact/huoqukehu",method:"post",data:e})},g=function(e){return o["a"].request({url:"Contact/Contact/delete1?ids="+e.ids+"&usName="+e.usName,method:"get"})},M=function(e){return o["a"].request({url:"Contact/Contact/Save_manger",method:"post",data:e})}},aa73:function(e,t,s){},bc57:function(e,t,s){"use strict";var o=s("aa73"),i=s.n(o);i.a},d79f:function(e,t,s){"use strict";s.d(t,"t",(function(){return i})),s.d(t,"u",(function(){return a})),s.d(t,"x",(function(){return n})),s.d(t,"w",(function(){return l})),s.d(t,"j",(function(){return r})),s.d(t,"k",(function(){return u})),s.d(t,"y",(function(){return d})),s.d(t,"z",(function(){return c})),s.d(t,"d",(function(){return m})),s.d(t,"e",(function(){return h})),s.d(t,"g",(function(){return f})),s.d(t,"f",(function(){return b})),s.d(t,"p",(function(){return p})),s.d(t,"i",(function(){return g})),s.d(t,"o",(function(){return M})),s.d(t,"c",(function(){return w})),s.d(t,"b",(function(){return y})),s.d(t,"a",(function(){return v})),s.d(t,"v",(function(){return C})),s.d(t,"n",(function(){return F})),s.d(t,"h",(function(){return k})),s.d(t,"m",(function(){return N})),s.d(t,"l",(function(){return x})),s.d(t,"r",(function(){return S})),s.d(t,"s",(function(){return q})),s.d(t,"q",(function(){return E})),s.d(t,"A",(function(){return U}));var o=s("66df"),i=function(e){return o["a"].request({url:"Customer/Customer/list",method:"post",data:e})},a=function(e){return o["a"].request({url:"Customer/Customer/getList",method:"post",data:e})},n=function(e){return o["a"].request({url:"Customer/Customer/getEdit/"+e.guid,method:"get"})},l=function(e){return o["a"].request({url:"Customer/Customer/allsystemuser",method:"get"})},r=function(e){return o["a"].request({url:"Customer/Customer/selectsystemuser/"+e.id,method:"get",params:e})},u=function(e){return o["a"].request({url:"Customer/Customer/selectsystemuser1/"+e.id,method:"get",params:e})},d=function(e){return o["a"].request({url:"Customer/Customer/getEdit1",method:"post",data:e})},c=function(e){return o["a"].request({url:"business/Business/GetEdit1shangji",method:"post",data:e})},m=function(e){return o["a"].request({url:"business/business/BusView?guid="+e,method:"get"})},h=function(e){return o["a"].request({url:"Customer/Customer/BusView2",method:"post",data:e})},f=function(e){return o["a"].request({url:"Customer/Customer/BusViewlxrLog",method:"post",data:e})},b=function(e){return o["a"].request({url:"Customer/Customer/BusView3?guid="+e,method:"get"})},p=function(e){return o["a"].request({url:"Contact/Contact/GetSelectCustomer/",method:"get"})},g=function(e){return o["a"].request({url:"Contact/Contact/GetAllCustomer/",method:"get"})},M=function(e){return o["a"].request({url:"Contact/Contact/Geallmanager/",method:"get"})},w=function(e){return o["a"].request({url:"Customer/Customer/BusEdit",method:"post",data:e})},y=function(e){return o["a"].request({url:"Customer/Customer/BusAdd",method:"post",data:e})},v=function(e){return o["a"].request({url:"Customer/Customer/Batch",method:"get",params:e})},C=function(e){return o["a"].request({url:"Customer/Customer/getTravel",method:"post",data:e})},F=function(e){return o["a"].request({url:"Customer/Customer/edit",method:"post",data:e})},k=function(e){return o["a"].request({url:"Customer/Customer/EditContactPerson",method:"post",data:e})},N=function(e){return o["a"].request({url:"Customer/Customer/delete?ids="+e.ids+"&usName="+e.usName,method:"get"})},x=function(e){return o["a"].request({url:"Customer/Customer/Create",method:"post",data:e})},S=function(){return o["a"].request({url:"Customer/Customer/AllStatus",method:"get"})},q=function(){return o["a"].request({url:"Customer/Customer/AllTypes",method:"get"})},E=function(){return o["a"].request({url:"Customer/Customer/AllIndustry",method:"get"})},U=function(){return o["a"].request({url:"Customer/Customer/tree",method:"get"})}},dc44:function(e,t,s){"use strict";var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"dnc-table-wrap"},[e._t("searcher",[e.searchable&&"top"===e.searchPlace?s("div",{staticClass:"search-con search-con-top"},[s("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"输入关键字搜索"},on:{"on-change":e.handleClear},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),s("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.handleSearch}},[s("Icon",{attrs:{type:"search"}}),e._v(" 搜索 ")],1)],1):e._e()]),e._t("table",[e._v("暂无数据")]),s("div",{staticStyle:{"margin-top":"15px"}},[e._t("pager",[s("Page",{attrs:{total:e.totalCount,"page-size":e.pageSize,size:"small","show-elevator":"","show-sizer":"","show-total":"","page-size-opts":e.pageSizeOpts},on:{"on-change":e.onPageChanged,"on-page-size-change":e.onPageSizeChanged}})])],2)],2)},i=[],a=(s("c5f6"),{name:"DzTable",data:function(){return{searchValue:""}},props:{searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:"top"},totalCount:{type:Number,default:0},pageSize:{type:Number,default:20},showRefreshButton:{type:Boolean,default:!1},pageSizeOpts:{type:Array,default:function(){return[5,10,20,30,40,50]}}},methods:{handleClear:function(){},handleSearch:function(){this.$emit("on-search")},onPageChanged:function(e){this.$emit("on-page-change",e)},onPageSizeChanged:function(e){this.$emit("on-page-size-change",e)}}}),n=a,l=(s("bc57"),s("2877")),r=Object(l["a"])(n,o,i,!1,null,null,null);t["a"]=r.exports}}]);